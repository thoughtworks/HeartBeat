---
import '@fontsource/ibm-plex-mono/400.css';
import '@fontsource/ibm-plex-mono/400-italic.css';
---

<!-- Global Metadata -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<meta name="theme-color" content="hsl(256, 44%, 15%)" media="(prefers-color-scheme: dark)" />
<meta name="theme-color" content="hsl(273, 37%, 93%)" media="(prefers-color-scheme: light)" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="alternate icon" type="image/x-icon" href="/favicon.ico" />
<link rel="sitemap" href="/sitemap-index.xml" />

<script is:inline type="module">
	const hostAddress = new URL(import.meta.url);
	const baseURL = `${hostAddress.origin}/${hostAddress.pathname.split('/')[1]}`;

	const sc = document.createElement('script');
	sc.setAttribute('type', 'module');
	sc.setAttribute('src', `${baseURL}/make-scrollable-code-focusable.js`);
	sc.setAttribute('type', 'text/javascript');
	document.head.appendChild(sc);

	const themeLink = document.createElement('link');
	themeLink.setAttribute('rel', 'stylesheet');
	themeLink.setAttribute('href', `${baseURL}/theme.css`);
	document.head.appendChild(themeLink);

	const indexLink = document.createElement('link');
	indexLink.setAttribute('rel', 'stylesheet');
	indexLink.setAttribute('href', `${baseURL}/index.css`);
	document.head.appendChild(indexLink);
</script>

<script is:inline>
	const root = document.documentElement;
	const theme = (() => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
			return 'dark';
		}
		return 'light';
	})();
	if (theme === 'light') {
		root.classList.remove('theme-dark');
	} else {
		root.classList.add('theme-dark');
	}
</script>

<!-- Double-click to highlight code blocks (inline only). -->
<script is:inline>
	document.addEventListener('dblclick', (el) => {
		const node = el.target;
		if (!node) return;
		if (node.nodeName !== 'CODE') return;
		if (node.parentElement?.nodeName === 'PRE') return;

		let range = new Range();
		range.setStart(node, 0);
		range.setEnd(node, 1);
		const selection = document.getSelection();
		if (selection) {
			selection.removeAllRanges();
			selection.addRange(range);
		}
	});
</script>
<!-- Fathom - beautiful, simple website analytics -->
<script src="https://cdn.usefathom.com/script.js" data-site="EZBHTSIG" defer></script>
